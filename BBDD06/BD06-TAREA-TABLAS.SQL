
REM 	 	TAREA BD06: BASE DE DATOS DE NOMINAS 
REM 		TABLAS: 
REM			N_EMPLEADOS, N_NIVELES, N_DEPARTAMENTOS
REM               	EMPLEADOS_COMPL y COMPLEMENTOS

REM ---- TABLA: COMPLEMENTOS

DROP TABLE N_COMPLEMENTOS  CASCADE CONSTRAINTS;

CREATE TABLE N_COMPLEMENTOS(
	COD_COMPL	VARCHAR2(2),
	EUROS_COMPL	NUMBER(5,2),
	CONSTRAINT PK_N_COMPLEMENTOS PRIMARY KEY (COD_COMPL)
);

INSERT INTO N_COMPLEMENTOS VALUES ('C1', 100);
INSERT INTO N_COMPLEMENTOS VALUES ('C2', 120);
INSERT INTO N_COMPLEMENTOS VALUES ('C3', 140);
INSERT INTO N_COMPLEMENTOS VALUES ('C4', 160);
INSERT INTO N_COMPLEMENTOS VALUES ('C5', 180);

COMMIT;

REM ------ TABLA: NIVELES

DROP TABLE N_NIVELES CASCADE CONSTRAINTS;

CREATE TABLE N_NIVELES (
	COD_NIVEL		NUMBER(2),
	NOMBRE_NIVEL		VARCHAR2(20),
	SUELDO_BASE		NUMBER(8,2),
	EUROS_UN_TRIENIO	NUMBER(5,2),
	CONSTRAINT PK_N_NIVELES PRIMARY KEY (COD_NIVEL)
);

INSERT INTO N_NIVELES VALUES (1,'N1',1000,50);
INSERT INTO N_NIVELES VALUES (2,'N2',1200,60);
INSERT INTO N_NIVELES VALUES (3,'N3',2000,70);
INSERT INTO N_NIVELES VALUES (4,'N4',3000,100);

COMMIT;

REM ---- TABLA: DEPARTAMENTOS

DROP TABLE N_DEPARTAMENTOS  CASCADE CONSTRAINTS;

CREATE TABLE N_DEPARTAMENTOS(
	COD_DEP VARCHAR2(3),
	NOMBRE_DEPT VARCHAR2(30),
	CONSTRAINT PK_N_DEPARTAMENTOS PRIMARY KEY (COD_DEP)
);

INSERT INTO N_DEPARTAMENTOS VALUES('D1','NOMBRE_DEPT1');
INSERT INTO N_DEPARTAMENTOS VALUES('D2','NOMBRE_DEPT2');
INSERT INTO N_DEPARTAMENTOS VALUES('D3','NOMBRE_DEPT3');
INSERT INTO N_DEPARTAMENTOS VALUES('D4','NOMBRE_DEPT4');

COMMIT;


REM ------ TABLA: EMPLEADOS

DROP TABLE N_EMPLEADOS CASCADE CONSTRAINTS;

CREATE TABLE N_EMPLEADOS(
	DNI 		VARCHAR2(9) 	
		CONSTRAINT PK_N_EMPLEADOS PRIMARY KEY,
	APELLIDOS 	VARCHAR2(30),
	NOMBRE 		VARCHAR2(20),
	DIRECCION	VARCHAR2(40),
	POBLACION	VARCHAR2(30),
	PROVINCIA	VARCHAR2(30),
	COD_POSTAL 	NUMBER(5),
	NRO_CUENTA	VARCHAR2(20),
	NRO_HIJOS	NUMBER(2),
	SEXO 		VARCHAR2(1),
	FECHA_ALTA 	DATE,
	NRO_TRIENIOS	NUMBER(2),
	COD_DEP		VARCHAR2(3)
		CONSTRAINT FK_EMP_DEP REFERENCES N_DEPARTAMENTOS(COD_DEP),
	COD_NIVEL	NUMBER(2)
		CONSTRAINT FK_EMP_NIV REFERENCES N_NIVELES(COD_NIVEL)
);


INSERT INTO N_EMPLEADOS VALUES ('1','A1','N1','D1','PO1','PR1',1,'NC1',0,'H','01/12/2005',3,'D1',1);
INSERT INTO N_EMPLEADOS VALUES ('2','A2','N2','D2','PO2','PR2',2,'NC2',1,'M','11/12/2005',10,'D2',2);
INSERT INTO N_EMPLEADOS VALUES ('3','A3','N3','D3','PO3','PR3',3,'NC3',2,'H','21/12/2005',5,'D3',3);
INSERT INTO N_EMPLEADOS VALUES ('4','A4','N4','D4','PO4','PR4',4,'NC1',3,'M','31/12/2005',4,'D1',4);
INSERT INTO N_EMPLEADOS VALUES ('5','A5','N5','D5','PO5','PR5',5,'NC2',4,'H','01/01/2006',2,'D2',1);
INSERT INTO N_EMPLEADOS VALUES ('6','A6','N6','D6','PO6','PR6',6,'NC2',5,'M','11/01/2007',0,'D2',2);
INSERT INTO N_EMPLEADOS VALUES ('7','A7','N7','D7','PO7','PR7',7,'NC3',5,'H','21/01/2006',1,'D3',3);
INSERT INTO N_EMPLEADOS VALUES ('8','A8','N8','D8','PO8','PR8',8,'NC3',1,'M','11/02/2015',3,'D3',4);
INSERT INTO N_EMPLEADOS VALUES ('9','A9','N9','D9','PO9','PR9',9,'NC3',3,'H','21/02/2006',13,'D3',1);
INSERT INTO N_EMPLEADOS VALUES ('10','A10','N10','D1','PO1','PR1',1,'NC1',2,'H','01/12/2010',3,'D1',1);
INSERT INTO N_EMPLEADOS VALUES ('11','A11','N11','D1','PO1','PR1',1,'NC1',2,'H','01/12/2016',0,'D1',1);
INSERT INTO N_EMPLEADOS VALUES ('12','A12','N12','D2','PO3','PR3',1,'NC1',2,'H','01/12/2010',2,'D1',1);
INSERT INTO N_EMPLEADOS VALUES ('13','A13','N13','D1','PO1','PR1',1,'NC1',2,'H','01/12/2010',1,'D1',3);




COMMIT;


REM --- TABLA: EMPLEADOS_COMPL

DROP TABLE N_EMPLEADOS_COMPL CASCADE CONSTRAINTS;

CREATE TABLE N_EMPLEADOS_COMPL(
	DNI 		VARCHAR2(9)
		CONSTRAINT FK_EMPCOM_EMPL REFERENCES N_EMPLEADOS(DNI),
	COD_COMPL 	VARCHAR2(2)
		CONSTRAINT FK_EMPCOM_COMP REFERENCES N_COMPLEMENTOS(COD_COMPL),
	CONSTRAINT PK_EMPLEADOS_COML PRIMARY KEY (DNI,COD_COMPL)

);

INSERT INTO N_EMPLEADOS_COMPL VALUES ('1','C1');
INSERT INTO N_EMPLEADOS_COMPL VALUES ('1','C2');
INSERT INTO N_EMPLEADOS_COMPL VALUES ('1','C3');
INSERT INTO N_EMPLEADOS_COMPL VALUES ('3','C4');
INSERT INTO N_EMPLEADOS_COMPL VALUES ('4','C1');
INSERT INTO N_EMPLEADOS_COMPL VALUES ('5','C3');
INSERT INTO N_EMPLEADOS_COMPL VALUES ('5','C5');
INSERT INTO N_EMPLEADOS_COMPL VALUES ('3','C3');



